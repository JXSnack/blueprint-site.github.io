<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blueprint - Explore Addons</title>

    <link rel="stylesheet" href="static/css/addons.css">
</head>

<body>
    
    <header class="top-bar" >
        <a href="/home">
            <img src="static/logo.webp" height="40px" width="40px" alt="logo" class="top-bar-logo">
            <a href="/" class="top-bar-name">Blueprint</a>
            <a href="/addons.html" class="top-bar-addons">Discover Addons</a>
            <a href="/news" class="top-bar-news">Addon News</a>
            <a href="/random.html" class="top-bar-random">Random Addon</a>
            <a href="/about" class="top-bar-about">About</a>
        </a>
    </header>
    <br>
    <br>
    <br>
    <br>
    <center>
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="Search addons..." class="search-input">
            <button onclick="searchAddons()" class="search-button">Search</button>
        </div>
    </center>


    <div class="addon-list" id="addon-list">
        <div class="addon" id="addon-template" style="display: none;">
            <h3 class="addon-name" id="addon-name"></h3>
            <div class="addon-description" id="addon-description"></div>
        </div>
    </div>
    
    <br>
    <br>
    <br>
    <div class="bottom-bar">
        <img src="static/logo.webp" alt="" class="bottom-bar-logo">
        <h4 class="bottom-bar-sitename">Create Addons</h4>
        <h6 class="bottom-bar-bug">Found a bug? Report it to blueprint-site@proton.me</h6>
        <h6 class="bottom-bar-bug">NOT AN OFFICIAL MINECRAFT SERVICE. NOT APPROVED BY OR ASSOCIATED WITH MOJANG OR MICROSOFT</h6>
    </div>


</body>
<script>
    async function populateAddons() {
        try {
            const addonList = document.getElementById('addon-list');

            // Fetch JSON data from the server
            const response = await fetch('static/json/addons.json');
            const data = await response.json();

            // Loop through each addon in the data object
            for (const key in data) {
                if (Object.hasOwnProperty.call(data, key)) {
                    const addonData = data[key];

                    // Clone the template .addon div
                    const addonDiv = document.getElementById('addon-template').cloneNode(true);
                    addonDiv.removeAttribute('id');
                    addonDiv.style.display = 'block';

                    // Populate addon name and description
                    addonDiv.querySelector('.addon-name').innerText = addonData.name;
                    addonDiv.querySelector('.addon-description').innerText = addonData.short_description;

                    // Append the populated .addon div to the addonList container
                    addonList.appendChild(addonDiv);
                }
            }
        } catch (error) {
            console.error('Error fetching JSON:', error);
        }
    }

    // Call the populateAddons function when the page loads
    window.onload = populateAddons;

    // Function to search addons
    function searchAddons() {
    const searchInput = document.getElementById('search-input').value.toLowerCase();
    const addons = document.querySelectorAll('.addon');

    addons.forEach(addon => {
        const addonName = addon.querySelector('.addon-name').innerText.toLowerCase();
        const addonDescription = addon.querySelector('.addon-description').innerText.toLowerCase();

        if (!searchInput || addonName.includes(searchInput) || addonDescription.includes(searchInput)) {
            addon.style.display = 'block';
        } else {
            addon.style.display = 'none';
        }
    });
}

    // Handle search when Enter key is pressed
    document.getElementById('search-input').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            searchAddons();
        }
    });
</script>
</html>